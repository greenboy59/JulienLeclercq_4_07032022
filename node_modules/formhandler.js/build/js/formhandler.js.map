{"version":3,"file":"formhandler.js.map","sources":["../../src/js/common/defaultConfig.js","../../src/js/common/FormHandlerError.js","../../src/js/core/Validator.js","../../src/js/common/constants.js","../../src/js/core/Form.js","../../src/js/core/Field.js","../../src/js/core/Input.js","../../src/js/core/Radio.js","../../src/js/core/Select.js","../../src/js/core/Color.js","../../src/js/core/Notice.js","../../src/js/core/Sender.js","../../src/js/FormHandler.js"],"sourcesContent":["export default {\n  form: {\n    block: '.formhandler',\n    submit: '.formhandler__submit',\n    delayForNotice: 3000,\n    notice: {\n      appendTo: '.formhandler__notices',\n      message: 'This form seems to be invalid',\n      successMessage: 'Form was successfully sent',\n      errorMessage: 'Oops, something went wrong',\n      classNames: {\n        block: 'formhandler__notice-form',\n        hidden: 'formhandler__notice-form--hidden',\n        visible: 'formhandler__notice-form--visible',\n      },\n    },\n  },\n  fields: {\n    min: false,\n    max: false,\n    send: true,\n  },\n  notices: {\n    appendTo: false,\n    nextToField: 'before',\n    message: false,\n  },\n  classNames: {\n    notices: {\n      block: 'formhandler__notice',\n      hidden: 'formhandler__notice--hidden',\n      visible: 'formhandler__notice--visible',\n    },\n    form: {\n      isValid: 'formhandler--is-valid',\n      isNotValid: 'formhandler--is-not-valid',\n    },\n    fields: {\n      isValid: 'formhandler__field--is-valid',\n      isNotValid: 'formhandler__field--is-not-valid',\n    },\n  },\n  sender: {\n    send: false,\n    type: 'xhr',\n    clearFormOnSuccess: true,\n  },\n  callbacks: {\n    onFieldChangeState() {},\n    onFormChangeState() {},\n    onSubmit() {},\n    onSend() {},\n  },\n};\n","/* eslint-disable no-useless-constructor */\nexport default class FormHandlerError extends Error {\n  constructor(props) {\n    super(props);\n  }\n}\n","/* eslint-disable no-useless-escape */\nimport FormHandlerError from '../common/FormHandlerError';\n\nexport default class Validator {\n  constructor(custom) {\n    this.custom = custom;\n\n    if (this.custom) {\n      this.addCustomValidations();\n    }\n  }\n\n  addCustomValidations() {\n    Object.entries(this.custom).forEach(([type, obj]) => {\n      Validator.validations[type] = obj;\n    });\n    return this;\n  }\n\n  static validate({\n    type, node, min, max,\n  }) {\n    if (!type) return;\n    const validation = Validator.validations[type];\n\n    if (!validation) {\n      throw new FormHandlerError(`No handler to validate type ${type}`);\n    }\n\n    // eslint-disable-next-line consistent-return\n    return validation(node, min, max);\n  }\n\n  static validations = {\n    isCheckboxChecked(node, min, max) {\n      let message = 'At least one checkbox must be selected';\n      let valid = true;\n      let checked = 0;\n\n      node.forEach((el) => {\n        if (el.checked) checked += 1;\n      });\n\n      if (min && max) {\n        if (checked < min) {\n          valid = false;\n          message = `Minimum ${min}, maximum ${max} checkboxes must be selected`;\n        }\n        if (checked > max) {\n          valid = false;\n          message = `Not more than ${max} ${max === 1 ? 'checkbox' : 'checkboxes'} must be selected`;\n        }\n      }\n      if (min && !max) {\n        if (checked < min) {\n          valid = false;\n          message = `At least ${min} ${min === 1 ? 'checkbox' : 'checkboxes'} must be selected`;\n        }\n      }\n      if (!min && max) {\n        if (!checked) {\n          message = `Minimum 1, maximum ${max} checkboxes must be selected`;\n        }\n        if (checked > max) {\n          valid = false;\n          message = `Not more than ${max} ${max === 1 ? 'checkbox' : 'checkboxes'} must be selected`;\n        }\n      }\n      if (!min && !max && !checked) {\n        valid = false;\n        message = 'At least one checkbox must be selected';\n      }\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isRadioChecked(node) {\n      const valid = Array.from(node).some(el => el.checked === true);\n      const message = 'Please select one of the buttons';\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isSelected(node) {\n      const valid = Array.from(node.options)\n        .filter(el => el.value.length > 0)\n        .some(el => el.selected === true);\n      const message = 'Please select one of the options';\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isName(node, min, max) {\n      const pattern = /^[a-zA-Z]+$/;\n      let valid = pattern.test(node.value);\n      let message = 'Must contain only letters';\n      const { length } = node.value.trim();\n\n      if (min && max) {\n        if (length < min) {\n          valid = false;\n          message = `Must contain at least ${min} ${min === 1 ? 'letter' : 'letters'} but not more than ${max}`;\n        }\n        if (length > max) {\n          valid = false;\n          message = `Must contain not more than ${max} ${max === 1 ? 'letter' : 'letters'}`;\n        }\n      }\n      if (min && !max) {\n        if (length < min) {\n          valid = false;\n          message = `Must contain at least ${min} ${min === 1 ? 'letter' : 'letters'}`;\n        }\n      }\n      if (!min && max) {\n        if (!length) {\n          message = `Must contain at least 1 letter but not more than ${max}`;\n        }\n        if (length > max) {\n          valid = false;\n          message = `Must contain not more than ${max} ${max === 1 ? 'letter' : 'letters'}`;\n        }\n      }\n      if (!min && !max && !length) {\n        valid = false;\n        message = 'Must contain at least one letter';\n      }\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isEmail(node) {\n      const pattern = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n      const valid = pattern.test(node.value);\n      const message = 'Must be a valid email address';\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isPhone(node, min, max) {\n      const pattern = /^[+]?[\\s./0-9]*[(]?[0-9]{1,4}[)]?[-\\s./0-9]*$/g;\n      const { length } = node.value.trim();\n      let valid = pattern.test(node.value);\n      let message = 'Must be a valid phone number';\n\n      if (min && max) {\n        if (length < min) {\n          valid = false;\n          message = `Must contain at least ${min} ${min === 1 ? 'digit' : 'digits'} but not more than ${max}`;\n        }\n        if (length > max) {\n          valid = false;\n          message = `Must contain not more than ${max} ${max === 1 ? 'digit' : 'digits'}`;\n        }\n      }\n      if (min && !max) {\n        if (length < min) {\n          valid = false;\n          message = `Must contain at least ${min} ${min === 1 ? 'digit' : 'digits'}`;\n        }\n      }\n      if (!min && max) {\n        if (!length) {\n          message = `Must contain at least 1 digit but not more than ${max}`;\n        }\n        if (length > max) {\n          valid = false;\n          message = `Must contain not more than ${max} ${max === 1 ? 'digit' : 'digits'}`;\n        }\n      }\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isNonEmpty(node, min, max) {\n      const { length } = node.value.trim();\n      let valid = length > 0;\n      let message = 'Must contain at least one character';\n\n      if (min && max) {\n        if (length < min) {\n          valid = false;\n          message = `Must contain at least ${min} ${min === 1 ? 'character' : 'characters'} but not more than ${max}`;\n        }\n        if (length > max) {\n          valid = false;\n          message = `Must contain not more than ${max} ${max === 1 ? 'character' : 'characters'}`;\n        }\n      }\n      if (min && !max) {\n        if (length < min) {\n          valid = false;\n          message = `Must contain at least ${min} ${min === 1 ? 'character' : 'characters'}`;\n        }\n      }\n      if (!min && max) {\n        if (!length) {\n          message = `Must contain at least 1 character but not more than ${max}`;\n        }\n        if (length > max) {\n          valid = false;\n          message = `Must contain not more than ${max} ${max === 1 ? 'character' : 'characters'}`;\n        }\n      }\n\n      return {\n        valid,\n        message,\n      };\n    },\n  };\n}\n","export const HTML_SELECT_ELEMENT = 'HTMLSelectElement';\nexport const INPUT = 'input';\nexport const LOAD = 'load';\nexport const UNDEFINED = 'undefined';\nexport const SUCCESS = 'success';\nexport const ERROR = 'error';\nexport const OBJECT = 'object';\nexport const FORM = 'form';\nexport const CLICK = 'click';\nexport const DIV = 'div';\nexport const READY_STATE_CHANGE = 'readystatechange';\nexport const XHR = 'xhr';\nexport const FETCH = 'fetch';\nexport const AFTER = 'after';\nexport const BEFORE = 'before';\nexport const STRING = 'string';\nexport const CHECKBOX = 'checkbox';\nexport const RADIO = 'radio';\nexport const SELECT = 'select-one';\nexport const NODE_LIST = 'NodeList';\nexport const COLOR = 'color';\n","import {\n  CLICK,\n} from '../common/constants';\n\nexport default class Form {\n  constructor({ ...opts }) {\n    this.node = opts.node;\n    this.submit = opts.submit;\n    this.classNames = opts.classNames;\n    this.fields = opts.fields;\n    this.listener = opts.listener;\n    this.valid = null;\n    this.submitted = false;\n    this.sent = null;\n    this.callback = opts.callback;\n    this.submit.addEventListener(CLICK, this.listener);\n  }\n\n  get fieldsValidity() {\n    const validness = new Set();\n\n    // eslint-disable-next-line no-unused-vars\n    Object.entries(this.fields).forEach(([name, field]) => {\n      if (field.validation) {\n        validness.add(field.valid);\n      }\n    });\n\n    return !validness.has(false);\n  }\n\n  setState() {\n    const validity = this.fieldsValidity;\n\n    this.callback(this.node, this.valid, validity);\n\n    this.valid = validity;\n\n    if (this.submitted) {\n      this.toggleClassNames();\n    }\n  }\n\n  toggleClassNames() {\n    if (this.valid) {\n      this.node.classList.remove(this.classNames.isNotValid);\n      this.node.classList.add(this.classNames.isValid);\n    } else {\n      this.node.classList.remove(this.classNames.isValid);\n      this.node.classList.add(this.classNames.isNotValid);\n    }\n  }\n\n  clear() {\n    // eslint-disable-next-line no-unused-vars\n    Object.entries(this.fields).forEach(([name, field]) => {\n      field.clear();\n    });\n\n    this.callback(this.node, this.valid, false);\n    this.valid = false;\n    this.submitted = false;\n    this.node.classList.remove(this.classNames.isNotValid);\n    this.node.classList.remove(this.classNames.isValid);\n  }\n}\n","import {\n  NODE_LIST,\n} from '../common/constants';\n\nexport default class Field {\n  constructor({\n    node, validation, min, max, send, classNames, callback,\n  }) {\n    this.node = node;\n    this.type = this.node.constructor.name;\n    this.name = this.type === NODE_LIST ? this.node[0].name : this.node.name;\n    this.validation = validation;\n    this.send = send;\n    this.min = min;\n    this.max = max;\n    this.classNames = classNames;\n    this.valid = null;\n    this.submitted = false;\n    this.callback = callback;\n  }\n\n  get validatorOptions() {\n    return {\n      type: this.validation,\n      node: this.node,\n      min: this.min,\n      max: this.max,\n    };\n  }\n\n  setState(valid) {\n    this.callback(this.validation, this.name, this.node, this.valid, valid);\n\n    this.valid = valid;\n\n    if (this.submitted) {\n      this.toggleClassNames();\n    }\n  }\n\n  setFieldSubmitted(value) {\n    this.submitted = value;\n  }\n\n  on(type, listener) {\n    if (this.type === NODE_LIST) {\n      this.node.forEach(el => el.addEventListener(type, listener));\n    } else {\n      this.node.addEventListener(type, listener);\n    }\n  }\n\n  off(type, listener) {\n    if (this.type === NODE_LIST) {\n      this.node.forEach(el => el.removeEventListener(type, listener));\n    } else {\n      this.node.removeEventListener(type, listener);\n    }\n  }\n\n  remove() {\n    this.node.remove();\n  }\n}\n","import Field from './Field';\n\nexport default class Input extends Field {\n  constructor({ ...opts }) {\n    super({ ...opts });\n  }\n\n  toggleClassNames() {\n    if (this.valid) {\n      this.node.classList.remove(this.classNames.isNotValid);\n      this.node.classList.add(this.classNames.isValid);\n    } else {\n      this.node.classList.remove(this.classNames.isValid);\n      this.node.classList.add(this.classNames.isNotValid);\n    }\n  }\n\n  clear() {\n    this.callback(this.validation, this.name, this.node, this.valid, false);\n    this.node.value = '';\n    this.valid = false;\n    this.submitted = false;\n    this.node.classList.remove(this.classNames.isNotValid);\n    this.node.classList.remove(this.classNames.isValid);\n  }\n}\n","import Field from './Field';\n\nexport default class Radio extends Field {\n  constructor({ ...opts }) {\n    super({ ...opts });\n  }\n\n  toggleClassNames() {\n    if (this.valid) {\n      this.node.forEach(el => el.classList.remove(this.classNames.isNotValid));\n      this.node.forEach(el => el.classList.add(this.classNames.isValid));\n    } else {\n      this.node.forEach(el => el.classList.remove(this.classNames.isValid));\n      this.node.forEach(el => el.classList.add(this.classNames.isNotValid));\n    }\n  }\n\n  clear() {\n    this.callback(this.validation, this.name, this.node, this.valid, false);\n    this.valid = false;\n    this.submitted = false;\n    this.node.forEach(el => el.classList.remove(this.classNames.isValid));\n    this.node.forEach(el => el.classList.remove(this.classNames.isNotValid));\n    this.node.forEach((el) => {\n      // eslint-disable-next-line no-param-reassign\n      el.checked = false;\n    });\n  }\n}\n","import Field from './Field';\n\nexport default class Select extends Field {\n  constructor({ ...opts }) {\n    super({ ...opts });\n  }\n\n  toggleClassNames() {\n    if (this.valid) {\n      this.node.classList.remove(this.classNames.isNotValid);\n      this.node.classList.add(this.classNames.isValid);\n    } else {\n      this.node.classList.remove(this.classNames.isValid);\n      this.node.classList.add(this.classNames.isNotValid);\n    }\n  }\n\n  clear() {\n    this.callback(this.validation, this.name, this.node, this.valid, false);\n    this.valid = false;\n    this.submitted = false;\n    this.node.classList.remove(this.classNames.isValid);\n    this.node.classList.remove(this.classNames.isNotValid);\n    Array.from(this.node.options).forEach((el) => {\n      el.selected = false;\n    });\n  }\n}\n","import Field from './Field';\n\nexport default class Color extends Field {\n  constructor({ ...opts }) {\n    super({ ...opts });\n  }\n\n  toggleClassNames() {\n    if (this.valid) {\n      this.node.classList.remove(this.classNames.isNotValid);\n      this.node.classList.add(this.classNames.isValid);\n    } else {\n      this.node.classList.remove(this.classNames.isValid);\n      this.node.classList.add(this.classNames.isNotValid);\n    }\n  }\n\n  clear() {\n    this.callback(this.validation, this.name, this.node, this.valid, false);\n    this.node.value = '#000000';\n    this.valid = false;\n    this.submitted = false;\n    this.node.classList.remove(this.classNames.isNotValid);\n    this.node.classList.remove(this.classNames.isValid);\n  }\n}\n","import {\n  DIV,\n  BEFORE,\n  AFTER, NODE_LIST,\n} from '../common/constants';\n\nexport default class Notice {\n  constructor({\n    form, message, classNames, appendTo, nextToField, parent,\n  }) {\n    this.form = form;\n    this.message = message;\n    this.classNames = classNames;\n    this.appendTo = appendTo;\n    this.nextToField = nextToField;\n    this.parent = parent;\n    this.node = null;\n    this.mount();\n  }\n\n  mount() {\n    this.node = document.createElement(DIV);\n    this.node.classList.add(this.classNames.block);\n    this.node.classList.add(this.classNames.hidden);\n\n    if (this.appendTo) {\n      this.parent.appendChild(this.node);\n    } else {\n      if (this.nextToField === BEFORE) {\n        if (this.parent.constructor.name === NODE_LIST) {\n          this.parent = this.parent[0];\n        }\n        this.parent.parentElement.insertBefore(this.node, this.parent);\n      }\n      if (this.nextToField === AFTER) {\n        if (this.parent.constructor.name === NODE_LIST) {\n          this.parent = this.parent[this.parent.length - 1];\n        }\n        this.parent.parentElement.insertBefore(this.node, this.parent.nextElementSibling);\n      }\n    }\n  }\n\n  show() {\n    this.node.classList.remove(this.classNames.hidden);\n    this.node.classList.add(this.classNames.visible);\n    this.node.innerText = this.message;\n  }\n\n  hide() {\n    this.node.classList.remove(this.classNames.visible);\n    this.node.classList.add(this.classNames.hidden);\n  }\n\n  remove() {\n    this.node.remove();\n  }\n}\n","import FormHandlerError from '../common/FormHandlerError';\nimport {\n  HTML_SELECT_ELEMENT,\n  READY_STATE_CHANGE,\n  FETCH,\n  XHR,\n  SUCCESS,\n  ERROR,\n  NODE_LIST,\n} from '../common/constants';\n\nexport default class Sender {\n  constructor({\n    type, url, method, data, fields, form, callbacks,\n  }) {\n    this.type = type;\n    this.url = url;\n    this.method = method;\n    this.data = data();\n    this.fields = fields;\n    this.form = form;\n    this.callbacks = callbacks;\n  }\n\n  makeData() {\n    const data = new FormData();\n\n    // eslint-disable-next-line no-unused-vars\n    Object.entries(this.data).forEach(([name, value]) => {\n      // eslint-disable-next-line no-useless-return\n      if (!this.fields[name].send) return;\n      data.append(name, value);\n    });\n\n    return data;\n  }\n\n  sendRequest(data) {\n    if (this.type === XHR) {\n      const xhr = new XMLHttpRequest();\n      xhr.open(this.method, this.url, true);\n      xhr.addEventListener(READY_STATE_CHANGE, (ev) => {\n        if (ev.target.readyState === 4) {\n          if (ev.target.status >= 200 && ev.target.status < 400) {\n            this.callbacks.setFormState(SUCCESS);\n            this.callbacks.onSend(SUCCESS);\n          } else {\n            this.callbacks.setFormState(ERROR);\n            this.callbacks.onSend(ERROR);\n            throw new FormHandlerError(`Status: ${ev.target.status}, Text: ${ev.target.statusText}`);\n          }\n        }\n      });\n      xhr.send(data);\n    }\n\n    if (this.type === FETCH) {\n      fetch(this.url, {\n        method: this.method,\n        body: data,\n      }).then((response) => {\n        if (response.status >= 200 && response.status < 400) {\n          this.callbacks.setFormState(SUCCESS);\n          this.callbacks.onSend(SUCCESS);\n        } else {\n          this.callbacks.setFormState(ERROR);\n          this.callbacks.onSend(ERROR);\n          throw new FormHandlerError(`Status: ${response.status}, Text: ${response.statusText}`);\n        }\n      });\n    }\n  }\n}\n","import defaultConfig from './common/defaultConfig';\nimport Validator from './core/Validator';\nimport Form from './core/Form';\nimport Input from './core/Input';\nimport Radio from './core/Radio';\nimport Select from './core/Select';\nimport Color from './core/Color';\nimport Notice from './core/Notice';\nimport Sender from './core/Sender';\nimport {\n  INPUT,\n  UNDEFINED,\n  ERROR,\n  SUCCESS,\n  OBJECT,\n  LOAD,\n  FORM,\n  CHECKBOX,\n  RADIO,\n  SELECT,\n  COLOR,\n  STRING,\n  NODE_LIST,\n  HTML_SELECT_ELEMENT,\n} from './common/constants';\n\nexport default class FormHandler { // TODO: Переименовать опцию appendTo => appendTo\n  constructor({ ...args }) {\n    this.opts = args;\n    this.fields = {};\n    this.notices = {};\n    this.form = null;\n    this.validator = new Validator(this.opts.customValidations);\n    this.callbacks = {};\n\n    this.init();\n  }\n\n  init() {\n    this.complementOptions().makeForm();\n\n    Object.entries(this.opts.fields).forEach(([name, field]) => {\n      this.makeField(name, field);\n      if (field.validation) {\n        const validation = Validator.validate(this.fields[name].validatorOptions);\n        this.makeNotice(name, field.notice);\n        this.setFieldState(name, validation.valid, validation.message);\n      }\n    });\n    this.form.setState();\n\n    return this;\n  }\n\n  complementOptions() {\n    // Add lacks classNames and merge.\n    this.opts.classNames = this.opts.classNames\n      ? { ...defaultConfig.classNames, ...this.opts.classNames }\n      : defaultConfig.classNames;\n    this.opts.classNames.form = {\n      ...defaultConfig.classNames.form,\n      ...this.opts.classNames.form,\n    };\n    this.opts.classNames.fields = {\n      ...defaultConfig.classNames.fields,\n      ...this.opts.classNames.fields,\n    };\n    this.opts.classNames.notices = {\n      ...defaultConfig.classNames.notices,\n      ...this.opts.classNames.notices,\n    };\n\n\n    // Add lacks form options and merge.\n    this.opts.form = this.opts.form\n      ? { ...defaultConfig.form, ...this.opts.form }\n      : defaultConfig.form;\n    this.opts.form.notice = { ...defaultConfig.form.notice, ...this.opts.form.notice };\n    this.opts.form.notice.classNames = {\n      ...this.opts.classNames.notice,\n      ...this.opts.form.notice.classNames,\n    };\n\n\n    // Add lacks notices options and merge\n    this.opts.notices = { ...defaultConfig.notices, ...this.opts.notices };\n\n\n    // Add lacks fields options and merge\n    // eslint-disable-next-line no-unused-vars\n    Object.entries(this.opts.fields).forEach(([name, obj]) => {\n      this.opts.fields[name] = { ...defaultConfig.fields, ...this.opts.fields[name] };\n      this.opts.fields[name].classNames = this.opts.fields[name].classNames\n        ? { ...this.opts.classNames.fields, ...this.opts.fields[name].classNames }\n        : this.opts.classNames.fields;\n      this.opts.fields[name].notice = { ...this.opts.notices, ...this.opts.fields[name].notice };\n      this.opts.fields[name].notice.classNames = {\n        ...this.opts.classNames.notices,\n        ...this.opts.fields[name].notice.classNames,\n      };\n    });\n\n    this.opts.sender = this.opts.sender\n      ? { ...defaultConfig.sender, ...this.opts.sender }\n      : defaultConfig.sender;\n\n    this.callbacks = this.opts.callbacks\n      ? { ...defaultConfig.callbacks, ...this.opts.callbacks }\n      : defaultConfig.callbacks;\n\n    return this;\n  }\n\n  makeForm() {\n    const options = {\n      fields: this.fields,\n      classNames: this.opts.classNames.form,\n      node: document.querySelector(this.opts.form.block),\n      submit: document.querySelector(this.opts.form.submit),\n      listener: this.submitHandler,\n      callback: this.callbacks.onFormChangeState,\n    };\n\n    this.form = new Form(options);\n    this.makeNotice(FORM, this.opts.form.notice);\n\n    return this;\n  }\n\n  makeField(name, field) {\n    let node = this.form.node.querySelector(`[name=${name}]`);\n    const { type } = node;\n    const options = {\n      node,\n      validation: field.validation,\n      min: field.min,\n      max: field.max,\n      send: field.send,\n      classNames: field.classNames,\n      callback: this.callbacks.onFieldChangeState,\n    };\n\n    if (type === RADIO || type === CHECKBOX) {\n      node = this.form.node.querySelectorAll(`[name=${name}]`);\n      options.node = node;\n      this.fields[name] = new Radio(options);\n    } else if (type === SELECT) {\n      this.fields[name] = new Select(options);\n    } else if (type === COLOR) {\n      this.fields[name] = new Color(options);\n    } else {\n      this.fields[name] = new Input(options);\n    }\n\n    this.fields[name].on(INPUT, this.inputHandler);\n    return this;\n  }\n\n  makeNotice(name, notice) {\n    const message = this.fields[name]\n      ? Validator.validate(this.fields[name].validatorOptions).message\n      : false;\n    const parent = notice.nextToField\n      ? this.fields[name].node\n      : document.querySelector(notice.appendTo);\n    const options = {\n      form: this.form.node,\n      classNames: notice.classNames,\n      appendTo: notice.appendTo,\n      message: notice.message || message,\n      nextToField: notice.nextToField,\n      parent,\n    };\n\n    this.notices[name] = new Notice(options);\n\n    return this;\n  }\n\n  setFormStateFromResponse = (result) => {\n    if (result === SUCCESS) {\n      this.notices.form.message = this.opts.form.notice.successMessage;\n      this.form.sent = true;\n      if (this.opts.sender.clearFormOnSuccess) {\n        this.form.clear();\n      }\n    }\n    if (result === ERROR) {\n      this.notices.form.message = this.opts.form.notice.errorMessage;\n      this.form.sent = false;\n    }\n    this.notices.form.show();\n  };\n\n  setFieldStateFromResponse(response, property, name, message) {\n    // eslint-disable-next-line valid-typeof\n    if (typeof response.then !== UNDEFINED) {\n      response\n        .then(data => data.json())\n        .then((json) => {\n          this.setFieldState(name, !!json[property], message);\n          this.form.setState();\n        });\n    } else {\n      response.addEventListener(LOAD, (ev) => {\n        this.setFieldState(name, !!JSON.parse(ev.target.response)[property], message);\n        this.form.setState();\n      });\n    }\n  }\n\n  setFieldState(name, valid, message = this.notices[name].message) {\n    const { submitted } = this.fields[name];\n\n    // eslint-disable-next-line valid-typeof\n    if (typeof valid === OBJECT) {\n      this.setFieldStateFromResponse(valid.response, valid.property, name, message);\n    } else {\n      this.fields[name].setState(valid);\n    }\n\n    this.notices[name].message = this.opts.fields[name].notice.message || message;\n    if (!valid && submitted) {\n      this.notices[name].show();\n    } else {\n      this.notices[name].hide();\n    }\n\n    return this;\n  }\n\n  inputHandler = (ev) => {\n    const { name } = ev.target;\n    const validation = Validator.validate(this.fields[name].validatorOptions);\n\n    if (this.fields[name].validation) {\n      this.setFieldState(name, validation.valid, validation.message);\n\n      // eslint-disable-next-line valid-typeof\n      if (typeof validation.valid !== OBJECT) {\n        this.form.setState();\n      }\n    }\n  };\n\n  submitHandler = (ev) => {\n    ev.preventDefault();\n    const fieldNodes = [];\n    const { delayForNotice } = this.opts.form;\n\n    // eslint-disable-next-line no-unused-vars\n    Object.entries(this.fields).forEach(([name, field]) => {\n      field.setFieldSubmitted(true);\n      fieldNodes.push(field.node);\n    });\n\n    this.callbacks.onSubmit(this.form.node, fieldNodes);\n\n    this.validateForm();\n    this.notices.form.message = this.opts.form.notice.message;\n\n    if (this.form.valid) {\n      this.notices.form.hide();\n\n      if (this.opts.sender.send) {\n        const options = {\n          type: this.opts.sender.type,\n          url: this.form.node.action,\n          method: this.form.node.method,\n          data: this.getFieldsAndValues,\n          fields: this.fields,\n          form: this.form.node,\n          callbacks: {\n            setFormState: this.setFormStateFromResponse,\n            onSend: this.callbacks.onSend,\n          },\n        };\n        const sender = new Sender(options);\n\n        sender.sendRequest(sender.makeData());\n\n        setTimeout(() => {\n          this.notices.form.hide();\n        }, delayForNotice);\n      }\n    } else {\n      this.notices.form.show();\n\n      if (delayForNotice) {\n        setTimeout(() => {\n          this.notices.form.hide();\n        }, delayForNotice);\n      }\n    }\n  }\n\n  getFieldNameBy(field) { // return field name get by NodeList/Selector(.className)\n    const type = typeof field;\n    const { name } = field;\n    const { node } = this.form;\n    let fieldName;\n\n    if (type === OBJECT) {\n      fieldName = name;\n    }\n    if (type === STRING) {\n      const isSelector = /\\./.test(field);\n\n      if (isSelector) {\n        fieldName = node.querySelector(field).name;\n      } else {\n        fieldName = field;\n      }\n    }\n\n    return fieldName;\n  }\n\n  isFieldValid(field) {\n    return this.fields[this.getFieldNameBy(field)].valid;\n  }\n\n  getFieldValue(field) {\n    return this.fields[this.getFieldNameBy(field)].node.value;\n  }\n\n  isFormValid() {\n    return this.form.valid;\n  }\n\n  isFormSubmitted() {\n    return this.form.submitted;\n  }\n\n  isFormSent() {\n    return this.form.sent;\n  }\n\n  clearForm() {\n    this.form.clear();\n  }\n\n  clearField(field) { // Also clears classNames and field of instance like valid, submitted\n    this.fields[this.getFieldNameBy(field)].clear();\n    this.form.setState();\n  }\n\n  getField(field) { // Returns a field node\n    return this.fields[this.getFieldNameBy(field)].node;\n  }\n\n  addField(field, { ...opts }) {\n    const options = opts;\n    options.notice = options.notice ? options.notice : {};\n    const name = this.getFieldNameBy(field);\n\n    const fieldOptions = {\n      validation: options.validation,\n      min: options.min || defaultConfig.fields.min,\n      max: options.max || defaultConfig.fields.max,\n      send: options.send || defaultConfig.fields.send,\n      classNames: { ...this.opts.classNames.fields, ...options.classNames },\n    };\n\n    const noticeOptions = {\n      appendTo: options.notice.appendTo || defaultConfig.notices.appendTo,\n      nextToField: options.notice.nextToField || defaultConfig.notices.nextToField,\n      message: options.notice.message || defaultConfig.notices.message,\n      classNames: { ...this.opts.classNames.notices, ...options.notice.classNames },\n    };\n\n    this.opts.fields[name] = {\n      ...fieldOptions,\n      notice: noticeOptions,\n    };\n\n    this.makeField(name, this.opts.fields[name]);\n    this.fields[name].on(INPUT, this.inputHandler);\n\n    this.makeNotice(name, this.opts.fields[name].notice);\n\n    return this.fields[name].node;\n  }\n\n  removeField(field) {\n    const name = this.getFieldNameBy(field);\n\n    this.fields[name].remove();\n    this.notices[name].remove();\n  }\n\n  validateField(field) { // also turns on toggleClassNames\n    const name = this.getFieldNameBy(field);\n\n    if (this.fields[name].validation) {\n      const validation = Validator.validate(this.fields[name].validatorOptions);\n      this.fields[name].submitted = true;\n      this.setFieldState(name, validation.valid);\n    }\n    this.form.setState();\n\n    return this.fields[name].node;\n  }\n\n  validateForm() { // also turns on toggleClassNames\n    Object.entries(this.fields).forEach(([name, field]) => {\n      if (field.validation) {\n        const validation = Validator.validate(field.validatorOptions);\n        field.setFieldSubmitted(true);\n        this.setFieldState(name, validation.valid, validation.message);\n      }\n    });\n\n    this.form.submitted = true;\n    this.form.setState();\n\n    return this.form.node;\n  }\n\n  getFieldsAndValues = () => {\n    const data = {};\n\n    Object.entries(this.fields).forEach(([name, field]) => {\n      const type = field.node.constructor.name;\n\n      if (type === NODE_LIST) { // Radio/Checkbox\n        const inputType = field.node[0].type;\n\n        if (inputType === CHECKBOX) {\n          data[name] = [];\n          Array.from(field.node).forEach((node) => {\n            if (node.checked) {\n              data[name].push(node.value);\n            }\n          });\n        }\n        if (inputType === RADIO) {\n          data[name] = '';\n          Array.from(field.node).forEach((node) => {\n            if (node.checked) {\n              data[name] = node.value;\n            }\n          });\n        }\n      } else if (type === HTML_SELECT_ELEMENT) { // Select\n        data[name] = field.node.options[field.node.options.selectedIndex].value;\n      } else { // Others\n        data[name] = field.node.value;\n      }\n    });\n\n    return data;\n  }\n}\n"],"names":["form","block","submit","delayForNotice","notice","appendTo","message","successMessage","errorMessage","classNames","hidden","visible","fields","min","max","send","notices","nextToField","isValid","isNotValid","sender","type","clearFormOnSuccess","callbacks","onFieldChangeState","onFormChangeState","onSubmit","onSend","FormHandlerError","props","Error","Validator","custom","addCustomValidations","Object","entries","forEach","obj","validations","node","validation","isCheckboxChecked","valid","checked","el","isRadioChecked","Array","from","some","isSelected","options","filter","value","length","selected","isName","pattern","test","trim","isEmail","isPhone","isNonEmpty","HTML_SELECT_ELEMENT","INPUT","LOAD","UNDEFINED","SUCCESS","ERROR","OBJECT","FORM","CLICK","DIV","READY_STATE_CHANGE","XHR","FETCH","AFTER","BEFORE","STRING","CHECKBOX","RADIO","SELECT","NODE_LIST","COLOR","Form","opts","listener","submitted","sent","callback","addEventListener","validity","fieldsValidity","toggleClassNames","classList","remove","add","name","field","clear","validness","Set","has","Field","constructor","removeEventListener","Input","Radio","Select","Color","Notice","parent","mount","document","createElement","appendChild","parentElement","insertBefore","nextElementSibling","innerText","Sender","url","method","data","FormData","append","xhr","XMLHttpRequest","open","ev","target","readyState","status","setFormState","statusText","fetch","body","then","response","FormHandler","args","result","show","validate","validatorOptions","setFieldState","setState","preventDefault","fieldNodes","setFieldSubmitted","push","validateForm","hide","action","getFieldsAndValues","setFormStateFromResponse","sendRequest","makeData","setTimeout","inputType","selectedIndex","validator","customValidations","init","complementOptions","makeForm","makeField","makeNotice","defaultConfig","querySelector","submitHandler","querySelectorAll","on","inputHandler","property","json","JSON","parse","setFieldStateFromResponse","fieldName","isSelector","getFieldNameBy","fieldOptions","noticeOptions"],"mappings":"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"}